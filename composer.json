{
  "name": "hirasso/thumbhash-placeholders",
  "description": "A WordPress plugin to enhance your lazy-loaded images with thumbhash placeholders",
  "license": "GPL-3.0-or-later",
  "type": "wordpress-plugin",
  "authors": [
    {
      "name": "Rasso Hilber",
      "email": "mail@rassohilber.com"
    }
  ],
  "require": {
    "snicco/better-wp-cli": "^1.2",
    "sniccowp/php-scoper-wordpress-excludes": "dev-master",
    "srwiez/thumbhash": "dev-master"
  },
  "require-dev": {
    "ergebnis/composer-normalize": "dev-main",
    "friendsofphp/php-cs-fixer": "dev-master",
    "symfony/var-dumper": "7.2.x-dev",
    "yoast/wp-test-utils": "^1.0@dev"
  },
  "minimum-stability": "dev",
  "autoload": {
    "psr-4": {
      "Hirasso\\WP\\ThumbhashPlaceholders\\": "src/"
    }
  },
  "autoload-dev": {
    "psr-4": {
      "Hirasso\\WP\\ComposerActions\\": "config/composer",
      "Hirasso\\WP\\ThumbhashPlaceholders\\Tests\\": "tests/"
    }
  },
  "config": {
    "allow-plugins": {
      "ergebnis/composer-normalize": true
    },
    "optimize-autoloader": true,
    "preferred-install": "dist",
    "sort-packages": true
  },
  "scripts": {
    "scoped-package:create": [
      "composer run-script scoped-package:prepare",
      "php php-scoper.phar add-prefix --force",
      "composer dump-autoload --working-dir scoped --classmap-authoritative",
      "rm scoped/composer.json scoped/composer.lock",
      "rm -rf scoped/vendor/sniccowp/php-scoper-wordpress-excludes",
      "composer scoped-package:postprocess"
    ],
    "scoped-package:postprocess": "Hirasso\\WP\\ComposerActions\\ScopedPackage::postProcess",
    "scoped-package:prepare": [
      "rm -rf vendor scoped",
      "curl -sLO https://github.com/humbug/php-scoper/releases/latest/download/php-scoper.phar && echo 'âœ… Downloaded php-scoper.phar'",
      "chmod +x php-scoper.phar",
      "php php-scoper.phar --version",
      "composer install --no-dev --prefer-dist"
    ],
    "test:unit": [
      "@php ./vendor/phpunit/phpunit/phpunit -c phpunit.xml.dist --no-coverage"
    ],
    "test:wp": [
      "@php ./vendor/phpunit/phpunit/phpunit -c phpunit-wp.xml.dist --no-coverage"
    ],
    "wp-env:start": [
      "npx wp-env start"
    ],
    "test": [
      "npx wp-env run tests-cli --env-cwd=wp-content/plugins/thumbhash-placeholders composer test:wp && composer test:unit"
    ],
    "test:watch": [
      "ls tests/**/*.php | entr composer test"
    ],
    "plugin:check": [
      "composer scoped-package:create",
      "zip -r scoped.zip scoped",
      "wp plugin deactivate scoped || true",
      "wp plugin uninstall scoped || true",
      "wp plugin install scoped.zip --activate",
      "wp plugin check scoped"
    ],
    "make-pot": [
      "rm -rf scoped",
      "wp i18n make-pot . languages/thumbhash-placeholders.pot"
    ],
    "test:dist-archive:old": [
      "wp package install wp-cli/dist-archive-command",
      "rm -rf vendor",
      "composer install --no-dev --prefer-dist",
      "composer dump-autoload --classmap-authoritative",
      "config/scripts/generate-distignore.sh",
      "wp dist-archive scoped $(basename \"$(pwd)\").zip"
    ],
    "test:dist-archive": [
      "composer scoped-package:create",
      "cd scoped",
      "wp dist-archive . $(basename \"$(pwd)\").zip"
    ]
  },
  "scripts-descriptions": {
    "plugin:check": "check the plugin using plugin-check",
    "make-pot": "Update the pot file for translations",
    "test:dist-archive": "Test what will be landing on the WP.org repository"
  },
  "post-install-cmd": "composer normalize"
}
